{% extends 'base.html' %}

{% load static %}

{% block title %} หน้าหลัก {% endblock title%}
    
{% block content %}
    <body class="bg-light">


        <div class="header">
            <h1><i class="fas fa-pills me-2"></i>ตารางกินยาวันนี้</h1>
            <h2>วันที่: {{ current_date|date:"j F Y" }} |  เวลา: {{ current_date|time:"H:i" }} น.</h2>
        </div>

        

        <div class="container">

            {% for r in reminder_list %}
            <div class="med-card card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h1>{{ r.reminder_time }} น.</h1>
                            <h3>{{ r.prescription.medication.name }}</h3>
                            <h4 class="text-muted mb-2">( {{ r.prescription.duration }} )</h4>
                            <!-- <h6 class="text-muted mb-2">{{ r.prescription.frequency }}</h6> -->
                            <h6 class="" style="color: rgb(207, 0, 0);">หมายเหตุ: {{ r.prescription.notes }}</h6>

                            
                        </div>
                        {% if not r.taken %}
                        <div class="d-flex align-items-center">
                            <a href="" class="btn btn-danger">
                                <h4><i class="fas fa-pills me-2"></i>กินยา</h4>
                            </a>
                        </div>
                    
                        {% else %}
                        <div class="d-flex align-items-center">
                            <h4><i class="fas fa-pills me-2"></i>กินยาแล้ว</h4>
                        </div>
                        {% endif %}

                    </div>
                </div>
            </div>

            {% empty %}
            <h1>ไม่มีรายการกินยาในวันนี้</h1>
            {% endfor %}


            <div class="med-card card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h3>04:00 PM</h3>
                            <p class="text-muted mb-0">(หลังอาหาร)</p>
                            <p>ยาแก้ปวดหัว</p>
                        </div>
                        <div class="d-flex align-items-center">
                            <span class="pending me-2">ยังไม่กิน</span>
                            <i class="bi bi-capsule fs-4"></i>
                        </div>
                        <div class="d-flex align-items-center">
                            <span class="taken me-2">✓ กินแล้ว</span>
                            <i class="bi bi-capsule fs-4"></i>
                        </div>
                    </div>
                </div>
            </div>

          

        </div>
    </body>
{% endblock content %}

{% block script %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        setTimeout(function(){
            location.reload();
        }, 60000); // JavaScript สำหรับรีเฟรช
    </script>
{% endblock script %}
